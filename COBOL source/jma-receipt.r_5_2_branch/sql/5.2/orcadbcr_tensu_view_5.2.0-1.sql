\set ON_ERROR_STOP
-- SET client_encoding = 'UTF8';

--
-- Name: tbl_tensu; Type: VIEW; Schema: public; Owner: orca
--

DROP VIEW IF EXISTS public.tbl_tensu;

CREATE OR REPLACE VIEW public.tbl_tensu AS
 SELECT t_u.srycd,
    t_u.yukostymd,
    (to_char(((to_date(minymd.yukostymd, 'YYYYMMDD'::text) - 1))::timestamp with time zone, 'YYYYMMDD'::text))::character(8) AS yukoedymd,
    t_u.srykbn,
    t_u.srysyukbn,
    t_u.yukoketa,
    t_u.name,
    t_u.kanayukoketa,
    t_u.kananame,
    t_u.formalyukoketa,
    t_u.formalname,
    t_u.tensikibetu,
    t_u.ten,
    t_u.tanicd,
    t_u.tanimojisu,
    t_u.taniname,
    t_u.datakbn,
    t_u.hkntekkbn,
    t_u.nyugaitekkbn,
    t_u.routekkbn,
    t_u.hospsrykbn,
    t_u.osinkbn,
    t_u.houksnkbn,
    t_u.byokanrenkbn,
    t_u.sdokanryo,
    t_u.jituday,
    t_u.daycnt,
    t_u.ykzknrkbn,
    t_u.kzmcompsikibetu,
    t_u.kzmkgn,
    t_u.kzmjgn,
    t_u.kzm,
    t_u.kzmten,
    t_u.kzmerr,
    t_u.jgncnt,
    t_u.jgncnt1d,
    t_u.jgncnt1w,
    t_u.jgncntetcm,
    t_u.jgncntetc,
    t_u.jgncnterr,
    t_u.chuksncd,
    t_u.chuksntsuban,
    t_u.tsusokuage,
    t_u.kgnage,
    t_u.jgnage,
    t_u.timeksnkbn,
    t_u.kijunteigenkbn,
    t_u.kijunteigencd,
    t_u.laserksn,
    t_u.chpmesuksn,
    t_u.micmesuksn,
    t_u.donorkbn,
    t_u.knsjiskbn,
    t_u.knsjisgrpkbn,
    t_u.teigenkbn,
    t_u.sekizuisokutei,
    t_u.keibujyutu,
    t_u.autohougo,
    t_u.gaikanrikbn,
    t_u.tusokugaikbn,
    t_u.hokatuteigenkbn,
    t_u.chpnaisiksn,
    t_u.autofungo,
    t_u.chiikiksn,
    t_u.byosyokbn,
    t_u.chpgyokosotiksn,
    t_u.shortstayope,
    t_u.buikbn,
    t_u.santeirrkkbn,
    t_u.sstkijuncd1,
    t_u.sstkijuncd2,
    t_u.sstkijuncd3,
    t_u.sstkijuncd4,
    t_u.sstkijuncd5,
    t_u.sstkijuncd6,
    t_u.sstkijuncd7,
    t_u.sstkijuncd8,
    t_u.sstkijuncd9,
    t_u.sstkijuncd10,
    t_u.ageksnkgn1,
    t_u.ageksnjgn1,
    t_u.ageksnsrycd1,
    t_u.ageksnkgn2,
    t_u.ageksnjgn2,
    t_u.ageksnsrycd2,
    t_u.ageksnkgn3,
    t_u.ageksnjgn3,
    t_u.ageksnsrycd3,
    t_u.ageksnkgn4,
    t_u.ageksnjgn4,
    t_u.ageksnsrycd4,
    t_u.kentaicomment,
    t_u.nyukhnkbn,
    t_u.nyukhnksnkbn,
    t_u.kangoksn,
    t_u.oldtenskb,
    t_u.oldten,
    t_u.madokukbn,
    t_u.sinkeihakaikbn,
    t_u.seibutugakukbn,
    t_u.zoeizaikbn,
    t_u.csyyouryo,
    t_u.ykzkbn,
    t_u.zaigatakbn,
    t_u.kouhatukbn,
    t_u.longtoyokbn,
    t_u.meiuseskb,
    t_u.tokukizaiageksnkbn,
    t_u.sansokbn,
    t_u.tokukizaisbt1,
    t_u.tokukizaisbt2,
    t_u.jgnten,
    t_u.gaitenttlkbn,
    t_u.nyutenttlkbn,
    t_u.cdkbn_kbn,
    t_u.cdkbn_syo,
    t_u.cdkbn_bu,
    t_u.cdkbn_kbnnum,
    t_u.cdkbn_kbnnum_eda,
    t_u.cdkbn_kouban,
    t_u.kokuchi_kbn,
    t_u.kokuchi_syo,
    t_u.kokuchi_bu,
    t_u.kokuchi_kbnnum,
    t_u.kokuchi_kbnnum_eda,
    t_u.kokuchi_kouban,
    t_u.kokujiskbkbn1,
    t_u.kokujiskbkbn2,
    t_u.namechgkbn,
    t_u.kananamechgkbn,
    t_u.idokanren,
    t_u.kouhyojyunnum,
    t_u.yakkakjncd,
    t_u.syusaiskb,
    t_u.syomeikanren,
    t_u.chgymd,
    t_u.haisiymd,
    t_u.keikasochiymd,
    t_u.termid,
    t_u.opid,
    t_u.creymd,
    t_u.upymd,
    t_u.uphms,
    t_u.hospnum,
    t_u.gazoopesup,
    t_u.iryokansatukbn,
    t_u.masuiskbkbn,
    t_u.fukubikunaikbn,
    t_u.fukubikukotukbn,
    t_u.timemasuikbn,
    t_u.dpckbn,
    t_u.hisinsyumonitorksn,
    t_u.touketuhozonksn,
    t_u.kubunbangou,
    t_u.rosaikbn,
    t_u.sisiksn,
    t_u.akuseibyoriksn,
    t_u.sogaikoteiksn,
    t_u.chpsessakuksn,
    t_u.sasinjiheisikbn,
    '2'::smallint AS master_class
   FROM (public.tbl_tensu_user t_u
     JOIN ( SELECT tbl_tensu_price.hospnum,
            tbl_tensu_price.srycd,
            min((tbl_tensu_price.yukostymd)::text) AS yukostymd
           FROM public.tbl_tensu_price
          GROUP BY tbl_tensu_price.hospnum, tbl_tensu_price.srycd) minymd ON (((t_u.hospnum = minymd.hospnum) AND (t_u.srycd = (minymd.srycd)::bpchar) AND ((t_u.yukostymd)::text < minymd.yukostymd) AND ((t_u.yukoedymd)::text > minymd.yukostymd))))
UNION
 SELECT t_u.srycd,
    (GREATEST(t_u.yukostymd, (t_p.yukostymd)::bpchar))::character(8) AS yukostymd,
    (LEAST(t_u.yukoedymd, (t_p.yukoedymd)::bpchar))::character(8) AS yukoedymd,
    t_u.srykbn,
    t_u.srysyukbn,
    t_u.yukoketa,
    t_u.name,
    t_u.kanayukoketa,
    t_u.kananame,
    t_u.formalyukoketa,
    t_u.formalname,
    t_u.tensikibetu,
        CASE
            WHEN (t_p.price IS NULL) THEN t_u.ten
            ELSE t_p.price
        END AS ten,
    t_u.tanicd,
    t_u.tanimojisu,
    t_u.taniname,
    t_u.datakbn,
    t_u.hkntekkbn,
    t_u.nyugaitekkbn,
    t_u.routekkbn,
    t_u.hospsrykbn,
    t_u.osinkbn,
    t_u.houksnkbn,
    t_u.byokanrenkbn,
    t_u.sdokanryo,
    t_u.jituday,
    t_u.daycnt,
    t_u.ykzknrkbn,
    t_u.kzmcompsikibetu,
    t_u.kzmkgn,
    t_u.kzmjgn,
    t_u.kzm,
    t_u.kzmten,
    t_u.kzmerr,
    t_u.jgncnt,
    t_u.jgncnt1d,
    t_u.jgncnt1w,
    t_u.jgncntetcm,
    t_u.jgncntetc,
    t_u.jgncnterr,
    t_u.chuksncd,
    t_u.chuksntsuban,
    t_u.tsusokuage,
    t_u.kgnage,
    t_u.jgnage,
    t_u.timeksnkbn,
    t_u.kijunteigenkbn,
    t_u.kijunteigencd,
    t_u.laserksn,
    t_u.chpmesuksn,
    t_u.micmesuksn,
    t_u.donorkbn,
    t_u.knsjiskbn,
    t_u.knsjisgrpkbn,
    t_u.teigenkbn,
    t_u.sekizuisokutei,
    t_u.keibujyutu,
    t_u.autohougo,
    t_u.gaikanrikbn,
    t_u.tusokugaikbn,
    t_u.hokatuteigenkbn,
    t_u.chpnaisiksn,
    t_u.autofungo,
    t_u.chiikiksn,
    t_u.byosyokbn,
    t_u.chpgyokosotiksn,
    t_u.shortstayope,
    t_u.buikbn,
    t_u.santeirrkkbn,
    t_u.sstkijuncd1,
    t_u.sstkijuncd2,
    t_u.sstkijuncd3,
    t_u.sstkijuncd4,
    t_u.sstkijuncd5,
    t_u.sstkijuncd6,
    t_u.sstkijuncd7,
    t_u.sstkijuncd8,
    t_u.sstkijuncd9,
    t_u.sstkijuncd10,
    t_u.ageksnkgn1,
    t_u.ageksnjgn1,
    t_u.ageksnsrycd1,
    t_u.ageksnkgn2,
    t_u.ageksnjgn2,
    t_u.ageksnsrycd2,
    t_u.ageksnkgn3,
    t_u.ageksnjgn3,
    t_u.ageksnsrycd3,
    t_u.ageksnkgn4,
    t_u.ageksnjgn4,
    t_u.ageksnsrycd4,
    t_u.kentaicomment,
    t_u.nyukhnkbn,
    t_u.nyukhnksnkbn,
    t_u.kangoksn,
    t_u.oldtenskb,
    t_u.oldten,
    t_u.madokukbn,
    t_u.sinkeihakaikbn,
    t_u.seibutugakukbn,
    t_u.zoeizaikbn,
    t_u.csyyouryo,
    t_u.ykzkbn,
    t_u.zaigatakbn,
    t_u.kouhatukbn,
    t_u.longtoyokbn,
    t_u.meiuseskb,
    t_u.tokukizaiageksnkbn,
    t_u.sansokbn,
    t_u.tokukizaisbt1,
    t_u.tokukizaisbt2,
    t_u.jgnten,
    t_u.gaitenttlkbn,
    t_u.nyutenttlkbn,
    t_u.cdkbn_kbn,
    t_u.cdkbn_syo,
    t_u.cdkbn_bu,
    t_u.cdkbn_kbnnum,
    t_u.cdkbn_kbnnum_eda,
    t_u.cdkbn_kouban,
    t_u.kokuchi_kbn,
    t_u.kokuchi_syo,
    t_u.kokuchi_bu,
    t_u.kokuchi_kbnnum,
    t_u.kokuchi_kbnnum_eda,
    t_u.kokuchi_kouban,
    t_u.kokujiskbkbn1,
    t_u.kokujiskbkbn2,
    t_u.namechgkbn,
    t_u.kananamechgkbn,
    t_u.idokanren,
    t_u.kouhyojyunnum,
    t_u.yakkakjncd,
    t_u.syusaiskb,
    t_u.syomeikanren,
    t_u.chgymd,
    t_u.haisiymd,
    t_u.keikasochiymd,
    t_u.termid,
    t_u.opid,
    t_u.creymd,
    t_u.upymd,
    t_u.uphms,
    t_u.hospnum,
    t_u.gazoopesup,
    t_u.iryokansatukbn,
    t_u.masuiskbkbn,
    t_u.fukubikunaikbn,
    t_u.fukubikukotukbn,
    t_u.timemasuikbn,
    t_u.dpckbn,
    t_u.hisinsyumonitorksn,
    t_u.touketuhozonksn,
    t_u.kubunbangou,
    t_u.rosaikbn,
    t_u.sisiksn,
    t_u.akuseibyoriksn,
    t_u.sogaikoteiksn,
    t_u.chpsessakuksn,
    t_u.sasinjiheisikbn,
    '2'::smallint AS master_class
   FROM (public.tbl_tensu_user t_u
     LEFT JOIN public.tbl_tensu_price t_p ON (((t_u.hospnum = t_p.hospnum) AND (t_u.srycd = (t_p.srycd)::bpchar) AND (t_u.yukostymd <= (t_p.yukoedymd)::bpchar) AND (t_u.yukoedymd >= (t_p.yukostymd)::bpchar))))
UNION
 SELECT t_m.srycd,
    t_m.yukostymd,
    (to_char(((to_date(minymd.yukostymd, 'YYYYMMDD'::text) - 1))::timestamp with time zone, 'YYYYMMDD'::text))::character(8) AS yukoedymd,
    t_m.srykbn,
    t_m.srysyukbn,
    t_m.yukoketa,
    t_m.name,
    t_m.kanayukoketa,
    t_m.kananame,
    t_m.formalyukoketa,
    t_m.formalname,
    t_m.tensikibetu,
    t_m.ten,
    t_m.tanicd,
    t_m.tanimojisu,
    t_m.taniname,
    t_m.datakbn,
    t_m.hkntekkbn,
    t_m.nyugaitekkbn,
    t_m.routekkbn,
    t_m.hospsrykbn,
    t_m.osinkbn,
    t_m.houksnkbn,
    t_m.byokanrenkbn,
    t_m.sdokanryo,
    t_m.jituday,
    t_m.daycnt,
    t_m.ykzknrkbn,
    t_m.kzmcompsikibetu,
    t_m.kzmkgn,
    t_m.kzmjgn,
    t_m.kzm,
    t_m.kzmten,
    t_m.kzmerr,
    t_m.jgncnt,
    t_m.jgncnt1d,
    t_m.jgncnt1w,
    t_m.jgncntetcm,
    t_m.jgncntetc,
    t_m.jgncnterr,
    t_m.chuksncd,
    t_m.chuksntsuban,
    t_m.tsusokuage,
    t_m.kgnage,
    t_m.jgnage,
    t_m.timeksnkbn,
    t_m.kijunteigenkbn,
    t_m.kijunteigencd,
    t_m.laserksn,
    t_m.chpmesuksn,
    t_m.micmesuksn,
    t_m.donorkbn,
    t_m.knsjiskbn,
    t_m.knsjisgrpkbn,
    t_m.teigenkbn,
    t_m.sekizuisokutei,
    t_m.keibujyutu,
    t_m.autohougo,
    t_m.gaikanrikbn,
    t_m.tusokugaikbn,
    t_m.hokatuteigenkbn,
    t_m.chpnaisiksn,
    t_m.autofungo,
    t_m.chiikiksn,
    t_m.byosyokbn,
    t_m.chpgyokosotiksn,
    t_m.shortstayope,
    t_m.buikbn,
    t_m.santeirrkkbn,
    t_m.sstkijuncd1,
    t_m.sstkijuncd2,
    t_m.sstkijuncd3,
    t_m.sstkijuncd4,
    t_m.sstkijuncd5,
    t_m.sstkijuncd6,
    t_m.sstkijuncd7,
    t_m.sstkijuncd8,
    t_m.sstkijuncd9,
    t_m.sstkijuncd10,
    t_m.ageksnkgn1,
    t_m.ageksnjgn1,
    t_m.ageksnsrycd1,
    t_m.ageksnkgn2,
    t_m.ageksnjgn2,
    t_m.ageksnsrycd2,
    t_m.ageksnkgn3,
    t_m.ageksnjgn3,
    t_m.ageksnsrycd3,
    t_m.ageksnkgn4,
    t_m.ageksnjgn4,
    t_m.ageksnsrycd4,
    t_m.kentaicomment,
    t_m.nyukhnkbn,
    t_m.nyukhnksnkbn,
    t_m.kangoksn,
    t_m.oldtenskb,
    t_m.oldten,
    t_m.madokukbn,
    t_m.sinkeihakaikbn,
    t_m.seibutugakukbn,
    t_m.zoeizaikbn,
    t_m.csyyouryo,
    t_m.ykzkbn,
    t_m.zaigatakbn,
    t_m.kouhatukbn,
    t_m.longtoyokbn,
    t_m.meiuseskb,
    t_m.tokukizaiageksnkbn,
    t_m.sansokbn,
    t_m.tokukizaisbt1,
    t_m.tokukizaisbt2,
    t_m.jgnten,
    t_m.gaitenttlkbn,
    t_m.nyutenttlkbn,
    t_m.cdkbn_kbn,
    t_m.cdkbn_syo,
    t_m.cdkbn_bu,
    t_m.cdkbn_kbnnum,
    t_m.cdkbn_kbnnum_eda,
    t_m.cdkbn_kouban,
    t_m.kokuchi_kbn,
    t_m.kokuchi_syo,
    t_m.kokuchi_bu,
    t_m.kokuchi_kbnnum,
    t_m.kokuchi_kbnnum_eda,
    t_m.kokuchi_kouban,
    t_m.kokujiskbkbn1,
    t_m.kokujiskbkbn2,
    t_m.namechgkbn,
    t_m.kananamechgkbn,
    t_m.idokanren,
    t_m.kouhyojyunnum,
    t_m.yakkakjncd,
    t_m.syusaiskb,
    t_m.syomeikanren,
    t_m.chgymd,
    t_m.haisiymd,
    t_m.keikasochiymd,
    t_m.termid,
    t_m.opid,
    t_m.creymd,
    t_m.upymd,
    t_m.uphms,
    t_m.hospnum,
    t_m.gazoopesup,
    t_m.iryokansatukbn,
    t_m.masuiskbkbn,
    t_m.fukubikunaikbn,
    t_m.fukubikukotukbn,
    t_m.timemasuikbn,
    t_m.dpckbn,
    t_m.hisinsyumonitorksn,
    t_m.touketuhozonksn,
    t_m.kubunbangou,
    t_m.rosaikbn,
    t_m.sisiksn,
    t_m.akuseibyoriksn,
    t_m.sogaikoteiksn,
    t_m.chpsessakuksn,
    t_m.sasinjiheisikbn,
    '1'::smallint AS master_class
   FROM (master.tbl_tensu_master t_m
     JOIN ( SELECT tbl_tensu_price.hospnum,
            tbl_tensu_price.srycd,
            min((tbl_tensu_price.yukostymd)::text) AS yukostymd
           FROM public.tbl_tensu_price
          GROUP BY tbl_tensu_price.hospnum, tbl_tensu_price.srycd) minymd ON (((t_m.hospnum = minymd.hospnum) AND (t_m.srycd = (minymd.srycd)::bpchar) AND ((t_m.yukostymd)::text < minymd.yukostymd) AND ((t_m.yukoedymd)::text > minymd.yukostymd))))
  WHERE (NOT (EXISTS ( SELECT 1
           FROM public.tbl_tensu_user t_u
          WHERE ((t_m.hospnum = t_u.hospnum) AND (t_m.srycd = t_u.srycd)))))
UNION
 SELECT t_m.srycd,
    (GREATEST(t_m.yukostymd, (t_p.yukostymd)::bpchar))::character(8) AS yukostymd,
    (LEAST(t_m.yukoedymd, (t_p.yukoedymd)::bpchar))::character(8) AS yukoedymd,
    t_m.srykbn,
    t_m.srysyukbn,
    t_m.yukoketa,
    t_m.name,
    t_m.kanayukoketa,
    t_m.kananame,
    t_m.formalyukoketa,
    t_m.formalname,
    t_m.tensikibetu,
        CASE
            WHEN (t_p.price IS NULL) THEN t_m.ten
            ELSE t_p.price
        END AS ten,
    t_m.tanicd,
    t_m.tanimojisu,
    t_m.taniname,
    t_m.datakbn,
    t_m.hkntekkbn,
    t_m.nyugaitekkbn,
    t_m.routekkbn,
    t_m.hospsrykbn,
    t_m.osinkbn,
    t_m.houksnkbn,
    t_m.byokanrenkbn,
    t_m.sdokanryo,
    t_m.jituday,
    t_m.daycnt,
    t_m.ykzknrkbn,
    t_m.kzmcompsikibetu,
    t_m.kzmkgn,
    t_m.kzmjgn,
    t_m.kzm,
    t_m.kzmten,
    t_m.kzmerr,
    t_m.jgncnt,
    t_m.jgncnt1d,
    t_m.jgncnt1w,
    t_m.jgncntetcm,
    t_m.jgncntetc,
    t_m.jgncnterr,
    t_m.chuksncd,
    t_m.chuksntsuban,
    t_m.tsusokuage,
    t_m.kgnage,
    t_m.jgnage,
    t_m.timeksnkbn,
    t_m.kijunteigenkbn,
    t_m.kijunteigencd,
    t_m.laserksn,
    t_m.chpmesuksn,
    t_m.micmesuksn,
    t_m.donorkbn,
    t_m.knsjiskbn,
    t_m.knsjisgrpkbn,
    t_m.teigenkbn,
    t_m.sekizuisokutei,
    t_m.keibujyutu,
    t_m.autohougo,
    t_m.gaikanrikbn,
    t_m.tusokugaikbn,
    t_m.hokatuteigenkbn,
    t_m.chpnaisiksn,
    t_m.autofungo,
    t_m.chiikiksn,
    t_m.byosyokbn,
    t_m.chpgyokosotiksn,
    t_m.shortstayope,
    t_m.buikbn,
    t_m.santeirrkkbn,
    t_m.sstkijuncd1,
    t_m.sstkijuncd2,
    t_m.sstkijuncd3,
    t_m.sstkijuncd4,
    t_m.sstkijuncd5,
    t_m.sstkijuncd6,
    t_m.sstkijuncd7,
    t_m.sstkijuncd8,
    t_m.sstkijuncd9,
    t_m.sstkijuncd10,
    t_m.ageksnkgn1,
    t_m.ageksnjgn1,
    t_m.ageksnsrycd1,
    t_m.ageksnkgn2,
    t_m.ageksnjgn2,
    t_m.ageksnsrycd2,
    t_m.ageksnkgn3,
    t_m.ageksnjgn3,
    t_m.ageksnsrycd3,
    t_m.ageksnkgn4,
    t_m.ageksnjgn4,
    t_m.ageksnsrycd4,
    t_m.kentaicomment,
    t_m.nyukhnkbn,
    t_m.nyukhnksnkbn,
    t_m.kangoksn,
    t_m.oldtenskb,
    t_m.oldten,
    t_m.madokukbn,
    t_m.sinkeihakaikbn,
    t_m.seibutugakukbn,
    t_m.zoeizaikbn,
    t_m.csyyouryo,
    t_m.ykzkbn,
    t_m.zaigatakbn,
    t_m.kouhatukbn,
    t_m.longtoyokbn,
    t_m.meiuseskb,
    t_m.tokukizaiageksnkbn,
    t_m.sansokbn,
    t_m.tokukizaisbt1,
    t_m.tokukizaisbt2,
    t_m.jgnten,
    t_m.gaitenttlkbn,
    t_m.nyutenttlkbn,
    t_m.cdkbn_kbn,
    t_m.cdkbn_syo,
    t_m.cdkbn_bu,
    t_m.cdkbn_kbnnum,
    t_m.cdkbn_kbnnum_eda,
    t_m.cdkbn_kouban,
    t_m.kokuchi_kbn,
    t_m.kokuchi_syo,
    t_m.kokuchi_bu,
    t_m.kokuchi_kbnnum,
    t_m.kokuchi_kbnnum_eda,
    t_m.kokuchi_kouban,
    t_m.kokujiskbkbn1,
    t_m.kokujiskbkbn2,
    t_m.namechgkbn,
    t_m.kananamechgkbn,
    t_m.idokanren,
    t_m.kouhyojyunnum,
    t_m.yakkakjncd,
    t_m.syusaiskb,
    t_m.syomeikanren,
    t_m.chgymd,
    t_m.haisiymd,
    t_m.keikasochiymd,
    t_m.termid,
    t_m.opid,
    t_m.creymd,
    t_m.upymd,
    t_m.uphms,
    t_m.hospnum,
    t_m.gazoopesup,
    t_m.iryokansatukbn,
    t_m.masuiskbkbn,
    t_m.fukubikunaikbn,
    t_m.fukubikukotukbn,
    t_m.timemasuikbn,
    t_m.dpckbn,
    t_m.hisinsyumonitorksn,
    t_m.touketuhozonksn,
    t_m.kubunbangou,
    t_m.rosaikbn,
    t_m.sisiksn,
    t_m.akuseibyoriksn,
    t_m.sogaikoteiksn,
    t_m.chpsessakuksn,
    t_m.sasinjiheisikbn,
    '1'::smallint AS master_class
   FROM (master.tbl_tensu_master t_m
     LEFT JOIN public.tbl_tensu_price t_p ON (((t_m.hospnum = t_p.hospnum) AND (t_m.srycd = (t_p.srycd)::bpchar) AND (t_m.yukostymd <= (t_p.yukoedymd)::bpchar) AND (t_m.yukoedymd >= (t_p.yukostymd)::bpchar))))
  WHERE (NOT (EXISTS ( SELECT 1
           FROM public.tbl_tensu_user t_u
          WHERE ((t_m.hospnum = t_u.hospnum) AND (t_m.srycd = t_u.srycd)))));
